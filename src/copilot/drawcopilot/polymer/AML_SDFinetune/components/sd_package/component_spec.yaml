$schema: http://azureml/sdk-2-0/CommandComponent.json
name: sd_package
version: 0.0.1
display_name: sd_package
type: CommandComponent
description: put all models together for easy publish them to polymer
is_deterministic: false
# tags:
#   Office:
#   helpDocument: https://aka.ms/aml/compliant
#   contact: aml-ds-1p-enablers@microsoft.com
inputs:
  lora_model_dir:
    type: AnyDirectory
    optional: false
  hednet_model_dir:
    type: AnyDirectory
    optional: false

outputs:
  model_output_dir:
    type: AnyDirectory
    description: Output model

command: >-
  python run.py --lora_model_dir {inputs.lora_model_dir} --hednet_model_dir {inputs.hednet_model_dir} --model_output_dir {outputs.model_output_dir}

environment:
  docker:
    image: mcr.microsoft.com/azureml/openmpi4.1.0-cuda11.8-cudnn8-ubuntu22.04
  conda:
    conda_dependencies_file: component_env.yaml
  os: Linux

